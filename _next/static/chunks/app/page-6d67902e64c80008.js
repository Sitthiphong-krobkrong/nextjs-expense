(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2538:(e,s,t)=>{Promise.resolve().then(t.bind(t,4800))},4800:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var l=t(5155),a=t(2115);let n="transactions";function r(){try{let e=localStorage.getItem(n);return e?JSON.parse(e):[]}catch(e){return[]}}function d(e){localStorage.setItem(n,JSON.stringify(e))}function i(e){let{onSave:s,editing:t,onCancel:n}=e,[r,d]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[o,x]=(0,a.useState)("income");return(0,a.useEffect)(()=>{t&&(d(t.description),c(String(t.amount)),x(t.type))},[t]),(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r&&i&&(s({id:t?t.id:Date.now(),description:r,amount:parseFloat(i),type:o,date:new Date().toISOString()}),d(""),c(""),x("income"))},className:"p-4 bg-white rounded-lg shadow space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:t?"แก้ไขรายการ":"เพิ่มรายการใหม่"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm",children:"รายละเอียด"}),(0,l.jsx)("input",{type:"text",value:r,onChange:e=>d(e.target.value),className:"w-full mt-1 p-2 border rounded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm",children:"จำนวนเงิน"}),(0,l.jsx)("input",{type:"number",value:i,onChange:e=>c(e.target.value),className:"w-full mt-1 p-2 border rounded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm",children:"ประเภท"}),(0,l.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"w-full mt-1 p-2 border rounded",children:[(0,l.jsx)("option",{value:"income",children:"รายรับ"}),(0,l.jsx)("option",{value:"expense",children:"รายจ่าย"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:t?(0,l.jsx)(l.Fragment,{children:"บันทึก"}):(0,l.jsx)(l.Fragment,{children:"เพิ่ม"})}),t&&(0,l.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"ยกเลิก"})]})]})}function c(e){let{items:s,onEdit:t,onDelete:a}=e;return(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"รายการทั้งหมด"})}),(0,l.jsx)("div",{children:(0,l.jsx)("i",{className:"fa fa-id-card","aria-hidden":"true"})})]}),(0,l.jsxs)("table",{className:"w-full bg-white rounded-lg shadow overflow-hidden",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-2 text-left",children:"รายละเอียด"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"ประเภท"}),(0,l.jsx)("th",{className:"p-2 text-right",children:"จำนวนเงิน"}),(0,l.jsx)("th",{className:"p-2",children:"จัดการ"})]})}),(0,l.jsx)("tbody",{children:s.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-2",children:e.description}),(0,l.jsx)("td",{className:"p-2 capitalize",children:"expense"===e.type?"รายจ่าย":"รายรับ"}),(0,l.jsxs)("td",{className:"p-2 text-right",children:["expense"===e.type?"-":"+",e.amount.toLocaleString()]}),(0,l.jsxs)("td",{className:"p-2 text-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>t(e),className:"px-2 py-1 bg-yellow-400 rounded hover:bg-yellow-500",children:"แก้ไข"}),(0,l.jsx)("button",{onClick:()=>a(e.id),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"ลบ"})]})]},e.id))})]})]})}function o(e){let{transactions:s}=e,t=s.filter(e=>"income"===e.type).reduce((e,s)=>e+s.amount,0),a=s.filter(e=>"expense"===e.type).reduce((e,s)=>e+s.amount,0),n=t-a;return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"p-4 bg-green-100 rounded shadow",children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"รายรับทั้งหมด"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-green-700",children:t.toLocaleString()})]}),(0,l.jsxs)("div",{className:"p-4 bg-red-100 rounded shadow",children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"รายจ่ายทั้งหมด"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-red-700",children:a.toLocaleString()})]}),(0,l.jsxs)("div",{className:"p-4 bg-blue-100 rounded shadow",children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:"ยอดคงเหลือ"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:n.toLocaleString()})]})]})}function x(){let[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{s(r())},[]),(0,a.useEffect)(()=>{d(e)},[e]),(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,l.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,l.jsx)("h1",{className:"text-3xl font-semibold mb-6",children:"รายรับ-รายจ่าย"}),(0,l.jsx)(o,{transactions:e}),(0,l.jsx)(i,{onSave:e=>{if(t)d(r().map(s=>s.id===e.id?e:s));else{let s=r();s.push(e),d(s)}s(r()),n(null)},editing:t,onCancel:()=>n(null)}),(0,l.jsx)(c,{items:e,onEdit:e=>n(e),onDelete:e=>{d(r().filter(s=>s.id!==e)),s(r())}})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(2538)),_N_E=e.O()}]);